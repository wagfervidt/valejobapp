const { isEqual } = require('@sapappgyver/appgyver-schemas/utils/equality');
const { invertFilter } = require('../../utils/array');

module.exports = (inv) => {
  const { params: [array, removedItem], result } = inv;
  let filtered = false;
  return inv.invertTo(invertFilter(array, result, (item) => {
    if (!filtered && isEqual(removedItem, item)) {
      filtered = true;
      return false;
    }
    return true;
  }));
};
