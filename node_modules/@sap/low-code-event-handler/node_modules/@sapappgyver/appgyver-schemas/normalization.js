/**
 * Normalizes schema object to the recommended format.
 * @param {object} schema schema object
 * @returns normalized schema object
 */
function normalizeSchema(schema) {
  if (!schema) {
    // Nully schema equals to "any" schema
    return {};
  }
  // If schema is just a string, assume the "type" shortcut
  if (typeof schema === 'string') {
    return normalizeSchema({ type: schema });
  }
  // If type is "null" or "undefined", then implicitly assume enum (and examples)
  const { type } = schema;
  if (type === 'null' && !schema.enum) {
    return { ...schema, enum: schema.enum || [null] };
  }
  if (type === 'undefined' && !schema.enum) {
    return { ...schema, enum: schema.enum || [undefined] };
  }
  return schema;
}

module.exports.normalizeSchema = normalizeSchema;
