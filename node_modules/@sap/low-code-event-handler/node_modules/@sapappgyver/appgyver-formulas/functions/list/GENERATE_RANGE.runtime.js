module.exports = ([start, end, step = 1], { checkTimeout }) => {
  if (step === null || step === 0) {
    return null;
  }
  const saveStep = step || 1;
  if (typeof start === 'number' && Number.isFinite(start)
    && typeof end === 'number' && Number.isFinite(end)
    && typeof saveStep === 'number' && Number.isFinite(saveStep)) {
    if ((start > end && saveStep > 0)
      || (end > start && saveStep < 0)
      || (start === end && saveStep < 0)) {
      return null;
    }
    const result = [];
    const isIncrement = start <= end;
    let i = start;
    if (isIncrement) {
      for (; i <= end; i += saveStep) {
        result.push(i);
        checkTimeout();
      }
    } else {
      for (; i >= end; i += saveStep) {
        result.push(i);
        checkTimeout();
      }
    }
    return result;
  }
  return null;
};
