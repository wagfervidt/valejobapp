const sum = require('./SUM.runtime');

module.exports = ([numX, numN, numM, array]) => {
  if (Array.isArray(array)) {
    const validArray = array.filter(item => (typeof item === 'number' && Number.isFinite(item)));
    if (typeof numX === 'number' && Number.isFinite(numX)
      && typeof numN === 'number' && Number.isFinite(numN)
      && typeof numM === 'number' && Number.isFinite(numM)
      && validArray.length) {
      const newArray = validArray.map((item, index) => item * (numX ** (numN + (index) * numM)));
      return sum([newArray]);
    }
    return null;
  }
  return null;
};
