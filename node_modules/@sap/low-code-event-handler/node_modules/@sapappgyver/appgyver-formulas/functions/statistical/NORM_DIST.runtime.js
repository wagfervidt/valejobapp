const erf = require('./ERF.runtime');

module.exports = ([x, mean, std, cumulative]) => {
  if (
    typeof x === 'number'
      && Number.isFinite(x)
      && typeof mean === 'number'
      && Number.isFinite(mean)
      && typeof std === 'number'
      && Number.isFinite(std)
  ) {
    if (std > 0) {
      if (cumulative) {
        return 0.5 * (1 + erf([(x - mean) / Math.sqrt(2 * std * std)]));
      }
      return Math.exp(-0.5 * Math.log(2 * Math.PI) - Math.log(std)
        - ((x - mean) ** 2) / (2 * std * std));
    }
  }
  return null;
};
