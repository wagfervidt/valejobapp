const { isEqual } = require('@sapappgyver/appgyver-schemas/utils/equality');

module.exports = ([array, key]) => {
  if (!Array.isArray(array) || key == null) {
    return null;
  }
  const result = [];
  array.forEach((originItem) => {
    if (typeof originItem === 'object' && originItem != null) {
      const foundDuplicate = result.find(resultItem => isEqual(originItem[key], resultItem[key]));
      if (!foundDuplicate) {
        result.push(originItem);
      }
    }
  });
  return result;
};
