const { FV: futureValue } = require('../../financial');

module.exports = ([rate, periods, amount, current, isOnBeginning]) => {
  if (rate == null || periods == null || amount === null) {
    return null;
  }
  const currentSaved = current || 0;
  const isOnBeginningSaved = isOnBeginning || false;

  if (typeof rate !== 'number'
      || !Number.isFinite(rate)
      || typeof periods !== 'number'
      || !Number.isFinite(periods)
      || typeof amount !== 'number'
      || !Number.isFinite(amount)
      || typeof currentSaved !== 'number'
      || !Number.isFinite(currentSaved)
      || typeof isOnBeginningSaved !== 'boolean'
  ) {
    return null;
  }

  const result = futureValue(rate, periods, amount, currentSaved, isOnBeginningSaved);

  if (Number.isFinite(result)) {
    return Number(result.toFixed(2));
  }
  return null;
};
