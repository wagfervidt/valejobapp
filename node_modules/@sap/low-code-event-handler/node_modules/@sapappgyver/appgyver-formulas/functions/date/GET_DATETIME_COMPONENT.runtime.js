const { parseDateTime } = require('../../datetime');

module.exports = ([date, component]) => {
  if (date == null || !component) {
    return null;
  }
  if (typeof date === 'string') {
    if (Number.isNaN((Number(date)))) {
      const parsedDate = parseDateTime(date);
      if (parsedDate.isValid()) {
        const value = parsedDate.get(component);
        if (component.toLowerCase() === 'month' || component.toLowerCase() === 'm') {
          // The month numbering starts with 1 instead of 0 in expressions
          return value + 1;
        }
        return value;
      }
    }
  }
  return null;
};
