const execute = require('./REPEAT.runtime');

module.exports = {
  name: 'REPEAT',
  category: 'List',
  title: 'Repeat item',
  description: 'Constructs a list with a certain value repeated the given number of times',
  parameters: [{
    title: 'Item',
    description: 'Item to be repeated',
  }, {
    type: 'number',
    title: 'Count',
    description: 'Number of times the item will be in the list',
  }],
  analyze: ([item]) => {
    const itemSchema = item ? item.schema : { type: 'value' };
    const schema = itemSchema != null ? { type: 'array', items: itemSchema } : { type: 'array' };
    return { schema };
  },
  execute,
  examples: [
    { expression: 'REPEAT("three", 3)', result: ['three', 'three', 'three'] },
    { expression: 'REPEAT({foo: "bar"}, 2)', result: [{ foo: 'bar' }, { foo: 'bar' }] },
    { expression: 'REPEAT("hello", 0)', result: [] },
  ],
};
