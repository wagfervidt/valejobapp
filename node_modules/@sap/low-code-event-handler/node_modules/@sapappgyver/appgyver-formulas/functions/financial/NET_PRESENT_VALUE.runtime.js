const { NPV } = require('../../financial');

module.exports = ([rate, cashFlows]) => {
  if (rate == null || cashFlows == null) {
    return null;
  }
  if (typeof rate !== 'number'
      || !Number.isFinite(rate)
      || !Array.isArray(cashFlows)
  ) {
    return null;
  }
  const cashFlowsValid = cashFlows.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  const result = NPV(rate, cashFlowsValid);
  return Number.isFinite(result) ? Number(result.toFixed(2)) : null;
};
