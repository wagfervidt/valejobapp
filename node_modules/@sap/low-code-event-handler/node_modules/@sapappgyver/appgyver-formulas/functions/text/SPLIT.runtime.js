module.exports = ([string, pattern, maxItems]) => {
  if (string == null) {
    return null;
  }
  if (typeof string === 'string' && typeof pattern === 'string') {
    const arr = string.split(pattern);
    if (maxItems == null) {
      return arr;
    }
    if (typeof maxItems !== 'number') {
      return null;
    }
    if (maxItems <= 0) {
      return [];
    }
    if (!Number.isFinite(maxItems)) {
      return arr;
    }
    return arr.reduce((accum, item, index) => {
      if (index + 1 <= maxItems) {
        accum.push(item);
        return accum;
      }
      const [...temp] = accum;
      const lastItem = temp[temp.length - 1];
      temp[temp.length - 1] = `${lastItem}${pattern}${item}`;
      return temp;
    }, []);
  }
  return null;
};
