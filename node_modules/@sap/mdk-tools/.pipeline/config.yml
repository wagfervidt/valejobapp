# Piper general purpose pipeline
# This pipeline was generated by Hyperspace Onboarding
# To modify the pipeline or add additional steps please check:
# https://github.wdf.sap.corp/pages/ContinuousDelivery/piper-doc/stages/
general:
  buildTool: npm
  pipelineOptimization: true
  productiveBranch: main
  whitesourceUserTokenCredentialsId: 'whitesourceUserTokenCredentialsId'
  whitesourceProductName: 'DIST - SAP MDK TOOLS OD 1.0'
  whitesourceProductToken: 'e5ed560162824ca1ae72a369067dae5b13129e47ad2b4a5f985c185dfa942a17'
  whitesourceProjectNames: 
    - '@sap/mdk-tools'
  customScanVersion: 'main'
stages:
  Central Build:
    hadolintExecute: false
steps:
  artifactPrepareVersion:
    gitHttpsCredentialVaultSecretName: GROUP-SECRETS/github-mdkdev
  executeBuild:
    buildType: stage
  sapCallStagingService:
    profile: group-2465-default
    url: https://staging.repositories.cloud.sap/stage/api
  sapCumulusUpload:
    pipelineId: 7a5a00c0-8de9-46bb-96f1-2f0bfd965d4d
  sonarExecuteScan:
    serverUrl: https://sonar.tools.sap
    sonarVaultSecretName: GROUP-SECRETS/sonar
    pipelineId: '7a5a00c0-8de9-46bb-96f1-2f0bfd965d4d'
  checkmarxExecuteScan:
    checkmarxProject: mdk-tools-re
    filterPattern: "!**/node_modules/**, !**/.xmake/**, !**/*_test.go, !**/vendor/**/*.go, **/*.html, **/*.xml, **/*.go, **/*.py, **/*.js, **/*.scala, **/*.ts"
    checkmarxCredentialsId: 'checkmarxCredentialsId'
    serverUrl: 'https://cx.wdf.sap.corp'
    generatePdfReport: true
  whitesourceExecuteScan:
    buildTool: 'npm'
    scanType: 'ua'
    userToken: 'whitesourceUserTokenCredentialsId'
    configFilePath: './wss-unified-agent.config'
    cvssSeverityLimit: 12
