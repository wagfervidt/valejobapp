const average = require('./AVERAGE.runtime');

const devsq = (arr) => {
  const mean = average([arr]);
  if (!arr.length) {
    return null;
  }
  return arr.reduce((total, item) => total + ((item - mean) ** 2), 0);
};

module.exports = ([array]) => {
  if (!(Array.isArray(array))) {
    return null;
  }
  const arrayValid = array.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  const result = devsq(arrayValid);
  return Number.isFinite(result) ? result : null;
};
