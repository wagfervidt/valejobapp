const slope = (arr1, arr2) => {
  if (arr1.length !== arr2.length) {
    return null;
  }
  const { length } = arr1;
  if (length === 0) {
    return null;
  }
  const Y = arr1.slice(0, length);
  const X = arr2.slice(0, length);

  const sumOfMultiplyXY = X.reduce((total, item, i) => total + item * Y[i], 0);
  const sumX = X.reduce((total, item) => total + item, 0);
  const sumXQuad = X.reduce((total, item) => total + (item * item), 0);
  const sumY = Y.reduce((total, item) => total + item, 0);

  const dividedPart = length * sumOfMultiplyXY - sumX * sumY;
  const divisorPart = length * sumXQuad - (sumX * sumX);
  return dividedPart / divisorPart;
};

module.exports = ([array1, array2]) => {
  if (!(Array.isArray(array1) && Array.isArray(array2))) {
    return null;
  }
  const array1Valid = array1.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  const array2Valid = array2.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  const result = slope(array1Valid, array2Valid);
  return Number.isFinite(result) ? result : null;
};
