module.exports = ([principal, schedule]) => {
  if (principal == null || schedule == null) {
    return null;
  }
  if (typeof principal !== 'number'
      || !Number.isFinite(principal)
      || !Array.isArray(schedule)
  ) {
    return null;
  }
  const scheduleValid = schedule.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  const result = scheduleValid.reduce((total, item) => total * (1 + item), principal);
  return Number.isFinite(result) ? result : null;
};
