module.exports = (inv) => {
  const { params: [array], result } = inv;
  if (!Array.isArray(array) || !Array.isArray(result)) {
    throw new Error('Cannot invert a non-list value');
  }
  if (result.length !== array.length + 1) {
    throw new Error(`Cannot invert a list with length ${result.length} instead of ${array.length + 1}`);
  }
  const resultArray = result.slice();
  const resultItem = resultArray.pop();
  return inv.invertToParams([resultArray, resultItem]);
};
