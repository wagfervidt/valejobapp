const factorial = require('./FACTORIAL.runtime');
const product = require('./PRODUCT.runtime');
const sum = require('./SUM.runtime');

module.exports = ([array]) => {
  if (!Array.isArray(array)) {
    return null;
  }
  const validArray = array.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  if (validArray.length) {
    const sumValidArray = sum([validArray]);
    const factorialValidArrray = validArray.map(item => (factorial([item])));
    const productFactorialValidArrray = product([factorialValidArrray]);
    const result = factorial([sumValidArray]) / productFactorialValidArrray;
    return Number.isFinite(result) ? result : null;
  }
  return null;
};
