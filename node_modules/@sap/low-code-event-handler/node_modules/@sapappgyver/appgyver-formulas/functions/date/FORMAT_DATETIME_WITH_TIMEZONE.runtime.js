const moment = require('moment-timezone');

const timezones = moment.tz.names();
const { parseDateTime, formatMoment } = require('../../datetime');

module.exports = ([date, format, timezone]) => {
  if (date == null || typeof date !== 'string') {
    return null;
  }
  const momentDate = parseDateTime(date);
  if (!momentDate.isValid()) {
    return null;
  }
  const convertedDate = timezones.indexOf(timezone) >= 0
    ? momentDate.tz(timezone) : momentDate;
  return formatMoment(convertedDate, format);
};
