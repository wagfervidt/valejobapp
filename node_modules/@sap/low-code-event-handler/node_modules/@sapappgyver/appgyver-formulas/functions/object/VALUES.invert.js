module.exports = (inv) => {
  const { params: [obj], result: newValues } = inv;
  if (typeof obj !== 'object' || obj == null || Array.isArray(obj)) {
    throw new Error('Cannot invert with a non-object value');
  }
  if (!Array.isArray(newValues)) {
    throw new Error('Cannot invert a non-list value');
  }
  const keys = Object.keys(obj);
  if (keys.length !== newValues.length) {
    throw new Error(`Cannot invert a list with length ${newValues.length} not matching the key count ${keys.length}`);
  }
  const result = {};
  newValues.forEach((value, index) => {
    result[keys[index]] = value;
  });
  return inv.invertTo(result);
};
