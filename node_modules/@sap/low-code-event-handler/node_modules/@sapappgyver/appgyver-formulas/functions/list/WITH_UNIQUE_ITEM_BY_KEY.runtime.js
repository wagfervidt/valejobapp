const { isEqual } = require('@sapappgyver/appgyver-schemas/utils/equality');

module.exports = ([array, item, key]) => {
  if (!Array.isArray(array)
      || item == null
      || typeof item !== 'object'
      || key == null) {
    return null;
  }
  const copyIndex = array.findIndex(el => isEqual(el[key], item[key]));

  if (copyIndex === -1) {
    return [...array, item];
  }
  return [...array];
};
