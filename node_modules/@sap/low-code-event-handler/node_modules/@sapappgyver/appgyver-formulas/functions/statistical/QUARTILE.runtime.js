const percentile = require('./PERCENTILE.runtime');

const quartileSet = new Set([0, 1, 2, 3, 4]);

module.exports = ([array, quart]) => {
  if (!Array.isArray(array)) {
    return null;
  }
  if (!(typeof quart === 'number' && Number.isFinite(quart))) {
    return null;
  }

  if (!quartileSet.has(quart)) {
    return null;
  }
  const validArray = array.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  const quartArray = [...quartileSet];
  const percent = quart / quartArray[quartArray.length - 1];
  const result = percentile([validArray, percent]);
  return Number.isFinite(result) ? result : null;
};
