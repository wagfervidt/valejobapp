#!/usr/bin/env node
/**
 * Executing this Node file prints out the functions and
 * their titles to standard output.
 */
const functions = require('../functions');

const CYAN = '\x1b[36m';
const DIM = '\x1b[2m';
const RESET = '\x1b[0m';

const functionNames = Object.keys(functions);
const functionList = Object.values(functions);
const longestFunctionName = Math.max(...functionNames.map(key => key.length));
const longestCategoryName = Math.max(...functionList.map(({ category }) => category.length));
Object.values(functions).forEach((func) => {
  const name = `${CYAN}${func.name}${RESET}`;
  const namePadding = `${DIM}${''.padEnd(longestFunctionName + 2 - func.name.length, '…')}${RESET}`;
  const isInversible = func.maxInversions > 0;
  const inversionInfo = isInversible ? `${DIM}[${RESET}inv${DIM}]${RESET}` : `${DIM}……………${RESET}`;
  const category = `${DIM}${func.category}${RESET}`;
  const categoryPadding = `${DIM}${''.padEnd(longestCategoryName + 2 - func.category.length, ' ')}${RESET}`;
  process.stdout.write(`${name}${namePadding}${inversionInfo} ${category}${categoryPadding} ${func.title}\n`);
});
