# AppGyver Formulas

Formulas could be used e.g. in the following cases:

- Dynamically setting properties of components, e.g. text or visibility
- Dynamically setting the styles of a component, e.g. color, margin, etc.
- Providing a more complex input for a logic action node

The language is kept simply enough that the **user doesn't have to know programming languages** to use it.
Instead, the user sees suggestions and can choose functions, available data and snippets from lists.

## Formula language

Language supports the following features:

- Calls to **large number of built-in functions**, e.g. `SUM`, `AVERAGE`, `IF`, `NOT`
- Arithmetic operators `+`, `-`, `*`, and `/`
- Logical operators `||`, `&&` and `!`
- Comparisons `==`, `===`, `!=`, `!==`, `<`, `<=`, `>` and `>=`
- Remainders `%`
- Conditionals `<condition> ? <true value> : <false value>`
- References to values in _context_, e.g. `pageVars.myVariable`
- Computed member access, e.g. `pageVars.myObject["foo bar"]`

## AppGyver Examples

Show a price from an app variable with a currency symbol:

```javascript
appVars.bitcoinPrice + " €"
```

If a page variable `level` contains a number less than 5 then use color red, otherwise green:

```javascript
pageVars.level < 5 ? "#ff0000" : "#00ff00"
```

Show an average price for all the beers stored in data references, with a dollar symbol:

```javascript
"$" + AVERAGE(PLUCK(data.Beers, "price"))
```

Show the total value of a shopping cart, stored as an array to an app variable, with an euro symbol:

```javascript
SUM(MULTIPLY(PLUCK(appVars.products, "price"), PLUCK(appVars.producs, "quantity"))) + appVars.shippingFee + " €"
```

Format a creation **timestamp** for a **currently repeated** object (e.g. `11/07/2017 3:12pm`):

```javascript
FORMAT_DATETIME(current.timestamp, '[M01]/[D01]/[Y0001] [h#1]:[m01][P]')
```

The **current component** is an input field component and you would like to colorize it depending on whether or not the user has entered at least one non-whitespace character to it:

```javascript
LENGTH(TRIM(self.value)) > 0 ? "#ffcccc" : "#ffffff"
```

Let's say that you have a custom **composite component** containing a checkbox and a text label components.
The composite has a boolean property `checked` to which the checkbox is bound.
You could colorize the text label depending on the checked state:

```javascript
root.checked ? '#444444' : '#888888'
```

Or alternatively with a function:

```javascript
IF(root.checked, '#444444', '#888888')
```

Show an input field value from another component with a specific **component ID**.
Note that you should always prefer `self` or `root` if possible.

```javascript
components["d2b09b69-f175-4d64-8f39-0de879880b85"].value
```
