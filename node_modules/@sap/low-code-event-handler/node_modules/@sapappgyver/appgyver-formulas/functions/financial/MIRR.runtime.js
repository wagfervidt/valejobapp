const { MIRR } = require('../../financial');

module.exports = ([array, financingRate, reinvestmentRate]) => {
  if (!Array.isArray(array)) {
    return null;
  }

  if (typeof financingRate !== 'number'
      || !Number.isFinite(financingRate)
      || typeof reinvestmentRate !== 'number'
      || !Number.isFinite(reinvestmentRate)
  ) {
    return null;
  }

  const values = array.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  if (!values.length) {
    return null;
  }

  const result = MIRR(values, financingRate, reinvestmentRate);

  return Number.isFinite(result) ? result : null;
};
