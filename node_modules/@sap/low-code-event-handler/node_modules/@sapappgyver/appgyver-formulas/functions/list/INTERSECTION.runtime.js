const { isEqual } = require('@sapappgyver/appgyver-schemas/utils/equality');

module.exports = ([array1, array2]) => {
  if (Array.isArray(array1) && Array.isArray(array2)) {
    const result = array1.reduce((acc, item) => {
      const foundDuplicateIndex = array2.findIndex(uniqItem => isEqual(uniqItem, item));
      if (foundDuplicateIndex !== -1) {
        acc.push(item);
      }
      return acc;
    }, []);

    return result;
  }
  return null;
};
