const percentileExc = require('./PERCENTILE_EXC.runtime');

module.exports = ([array, quart]) => {
  if (!Array.isArray(array)) {
    return null;
  }
  if (!(typeof quart === 'number' && Number.isFinite(quart))) {
    return null;
  }
  const validArray = array.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  let result = null;
  switch (quart) {
    case 1:
      result = percentileExc([validArray, 0.25]);
      break;
    case 2:
      result = percentileExc([validArray, 0.5]);
      break;
    case 3:
      result = percentileExc([validArray, 0.75]);
      break;
    default:
      result = null;
  }
  return Number.isFinite(result) ? result : null;
};
