const mode = (array) => {
  const counts = {};
  array.forEach((item) => {
    counts[item] = (counts[item] || 0) + 1;
  });
  let maxCount = 0;
  let modeValue = null;
  Object.keys(counts).forEach((item) => {
    if (counts[item] > maxCount) {
      maxCount = counts[item];
      modeValue = item;
    }
  });
  if (maxCount === 1) {
    return null;
  }
  return parseFloat(modeValue);
};

module.exports = ([array]) => {
  if (!Array.isArray(array)) {
    return null;
  }
  const validArray = array.filter(item => (typeof item === 'number' && Number.isFinite(item)));
  if (validArray.length) {
    const result = mode(validArray);
    return Number.isFinite(result) ? result : null;
  }
  return null;
};
