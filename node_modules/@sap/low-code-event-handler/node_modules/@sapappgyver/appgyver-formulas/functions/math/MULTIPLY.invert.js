module.exports = (inv) => {
  const { params: [a, b], result, invertIndexes: [invertIndex] } = inv;
  const type = typeof result;
  const constant = invertIndex === 0 ? b : a;
  if (type === 'number') {
    if (typeof constant !== 'number') {
      throw new Error('Cannot invert difference using a non-number value');
    }
    if (Number.isNaN(result)) {
      throw new Error('Cannot invert difference with NaN value');
    }
    return inv.invertTo(invertIndex === 0 ? result / b : result / a);
  }
  throw new Error(`Cannot invert value of type ${type}`);
};
