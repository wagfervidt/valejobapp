import { Schema } from '@sapappgyver/appgyver-schemas';

export interface FunctionExample {
  expression: string;
  result: unknown;
  context?: Record<string, unknown>;
}

export interface FunctionDefinition {
  /**
   * The uppercase name of the function as used in formulas.
   */
  name: string;
  /**
   * The category to which this function belongs to.
   */
  category: string;
  /**
   * The display title of the function.
   */
  title: string;
  /**
   * The markdown-formatted description text of this function.
   */
  description: string;
  /**
   * Definition for each parameter in this function.
   */
  parameters: FunctionParameterDefinition[];
  /**
   * If this is an inversible formula, then this defines the
   * maximum number of inversible parameters.
   */
  maxInversions?: number;
  /**
   * Usage examples for the function.
   */
  examples: FunctionExample[];
  /**
   * Possible alternative names for this function.
   */
  searchNames?: string[];
}

export type FunctionParameterDefinition = Schema & {
  /**
   * Whether or not the parameter is inversible.
   */
  inversible?: true;
}
