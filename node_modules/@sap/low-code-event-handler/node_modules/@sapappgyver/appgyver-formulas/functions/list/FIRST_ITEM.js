const { getArrayItemSchema } = require('@sapappgyver/appgyver-schemas');
const execute = require('./FIRST_ITEM.runtime');

module.exports = {
  name: 'FIRST_ITEM',
  category: 'List',
  title: 'Return the first item from a list',
  description: 'Returns the first item from the given list. If the list empty then returns undefined value.',
  parameters: [{
    type: 'array',
    title: 'List',
    description: 'The list from which to find the first item',
  }],
  analyze: ([arrayParam]) => ({
    schema: getArrayItemSchema(arrayParam && arrayParam.schema) || {},
  }),
  execute,
  examples: [
    { expression: 'FIRST_ITEM([100, 3, 20])', result: 100 },
    { expression: 'FIRST_ITEM(["foo", "bar"])', result: 'foo' },
    {
      context: {
        array: [{ a: 1 }, { a: 2 }, { a: 3 }],
      },
      expression: 'FIRST_ITEM(array)',
      result: { a: 1 },
    },
  ],
};
