const moment = require('moment-timezone');
const { formatMoment } = require('../../datetime');

module.exports = ([date, format]) => {
  if (date == null || typeof date !== 'string') {
    return null;
  }
  const dateISORegex = /(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})[+-](\d{2}):(\d{2})/;
  const momentDate = dateISORegex.test(date)
    ? moment.parseZone(date)
    : moment.tz(date, 'Etc/Greenwich');
  return momentDate.isValid() ? formatMoment(momentDate, format) : null;
};
