const { parseDateTime, formatMoment } = require('../../datetime');

module.exports = ([timestamp, value, component]) => {
  if (timestamp == null || !component || typeof value !== 'number' || !Number.isFinite(value)) {
    return null;
  }
  const parsedDate = parseDateTime(timestamp);
  if (parsedDate.isValid()) {
    // The month numbering starts with 1 instead of 0 in expressions
    const componentLower = component.toLowerCase();
    const newValue = componentLower === 'month' || componentLower === 'm' ? value - 1 : value;
    return formatMoment(parsedDate.set(component, newValue));
  }
  return null;
};
