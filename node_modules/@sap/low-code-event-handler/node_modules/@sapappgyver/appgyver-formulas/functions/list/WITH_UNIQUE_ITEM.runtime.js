const { isEqual } = require('@sapappgyver/appgyver-schemas/utils/equality');

module.exports = ([array, item]) => {
  if (!Array.isArray(array)) {
    return null;
  }
  const updatedArray = [...array];
  if (typeof item !== 'undefined') {
    const copyIndex = updatedArray.findIndex(arrItem => (isEqual(item, arrItem)));
    if (copyIndex === -1) {
      updatedArray.push(item);
    }
  }
  return updatedArray;
};
